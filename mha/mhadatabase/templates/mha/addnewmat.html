<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" type="image/png" href="../../../img/img.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../static/login/addnewmat.css">
    <title>Maertin Heating & Cooling Bidding Program</title>
</head>

<body style="background: #008B8B;
             background-image: url('../../../../img/inventory2.jpg');
             background-repeat: no-repeat;
             background-attachment: fixed;
             background-size: 70%;
             background-position: center;">
<div class="container">
    <div class="container1">

    </div>
    <div class="container2">
        <div class="img">
            <a id="back"  href="/mhadatabase/installbidingpage">Back</a>
            <img class="img" src='../../img/img.png'>
        </div>
        <div class="container2A">
      <form class="form2" method="post"
            adddescrip-url="{% url 'mhadatabase:adddescrip' %}"
            addcost-url="{% url 'mhadatabase:addcost' %}"
            matmfg-url="{% url 'mhadatabase:addmatmfg' %}"
            matmfg2-url="{% url 'mhadatabase:matmfg2' %}"
            matmfgload-url="{% url 'mhadatabase:load_matmfg2' %}"
            matvendor-url="{% url 'mhadatabase:matvendor' %}"
            matvendor2-url="{% url 'mhadatabase:matvendor2' %}"
            matvendorload-url="{% url 'mhadatabase:load_matvendor2' %}"
            vendornum-url="{% url 'mhadatabase:vendornum' %}"
            mattype-url="{% url 'mhadatabase:mattype' %}"
            mattype2-url="{% url 'mhadatabase:mattype2' %}"
            mattypeload-url="{% url 'mhadatabase:load_mattype2' %}"
      >
          {% csrf_token %}
          {{ form.name_of_field }}
          <div class="form-row-descrip">
              {{ form.descrip.errors }}
              <label class="label">Description</label>
              <input id="id_descrip" type="text"  onfocusout="addDescription()">
          </div>
          <div class="form-row-cost">
              {{ form.cost.errors }}
              <label class="label">Unit Price</label>
              <input id="id_cost" type="text"  onfocusout="addCost()">
          </div>
          <div class="form-row-mfg">
              {{ form.matmfg.errors }}
              <label class="label">Manufacturer</label>
              {{ form.matmfg }}
          </div>
          <div class="form-row-vendor">
              {{ form.vendor.errors }}
              <label class="label">Vendor</label>
              {{ form.vendor }}
          </div>
          <div class="form-row-vendornum">
              {{ form.vendornum.errors }}
              <label class="label">Vendor Number</label>
              <input id="id_vendornum" type="text"  onfocusout="vendorNum()">
          </div>
          <div class="form-row-materialtype">
              {{ form.materialtype.errors }}
              <label class="label">Material Type</label>
              {{ form.materialtype }}
          </div>
            <div class="buttonrow">
                <a id="accept"  href="/mhadatabase/mattoupdate">Accept</a>
                <a id="delete"  href="/mhadatabase/deletemat">Delete</a>
            </div>
      </form>
        </div>

  </div>
    <div class="container3">

    </div>



</div>
<div class="mfg-modal" style="display:none">
            <div class="modal-content">
                <h3 class="modaltitle">Do you wish to add a new Manufacturer to the master list?</h3>
                <div class="buttonrow">
                    <button type="button" class="button1">Yes</button>
                    <button type="button" class="button2">No</button>
                </div>
            </div>
        </div>
        <div class="mfg2" style="display:none">
            <div class="modal-content">
                <h3 class="add-mfg-title">Add New Manufacturer</h3>
                <div class="input2">
                    {{ form.matmfg2.errors }}
                    {{ form.matmfg2 }}
                </div>
                <div class="butrow">
                    <button type="button" class="accept">Accept</button>
                    <button type="button" class="cancel">Cancel</button>
                </div>
            </div>
        </div>
        <div class="vendor-modal" style="display:none">
            <div class="modal-content">
                <h3 class="modaltitle">Do you wish to add a new Vendor to the master list?</h3>
                <div class="buttonrow">
                    <button type="button" class="button1vendor">Yes</button>
                    <button type="button" class="button2vendor">No</button>
                </div>
            </div>
        </div>
        <div class="vendor2" style="display:none">
            <div class="modal-content">
                <h3 class="add-mfg-title">Add New Vendor</h3>
                <div class="input2">
                    {{ form.vendor2.errors }}
                    {{ form.vendor2 }}
                </div>
                <div class="butrow">
                    <button type="button" class="acceptvendor">Accept</button>
                    <button type="button" class="cancelvendor">Cancel</button>
                </div>
            </div>
        </div>
        <div class="type-modal" style="display:none">
            <div class="modal-content">
                <h3 class="modaltitle">Do you wish to add a new Material Type to the master list?</h3>
                <div class="buttonrow">
                    <button type="button" class="button1type">Yes</button>
                    <button type="button" class="button2type">No</button>
                </div>
            </div>
        </div>
        <div class="type2" style="display:none">
            <div class="modal-content">
                <h3 class="add-mfg-title">Add New Material Type</h3>
                <div class="input2">
                    {{ form.materialtype2.errors }}
                    {{ form.materialtype2 }}
                </div>
                <div class="butrow">
                    <button type="button" class="accepttype">Accept</button>
                    <button type="button" class="canceltype">Cancel</button>
                </div>
            </div>
        </div>
</body>
</html>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
////////////////// On Load //////////////////////////////////////

$(document).ready(function() {

setTimeout(function(){
            //if ($('#id_modelnum').length) $("#id_modelnum").attr("disabled", true)
            //if ($('#modelnum_id').val() >1) $("#modelnum_id").attr("disabled", true)
            var urlC = $(".form2").attr("matmfgload-url");
            req = $.ajax({
                   url: urlC,
                   data:{
                     },
                     success: function (data) {
                       $("#id_matmfg").html(data);
                     }
                });
        }, 0);


setTimeout(function(){
            //if ($('#id_modelnum').length) $("#id_modelnum").attr("disabled", true)
            //if ($('#modelnum_id').val() >1) $("#modelnum_id").attr("disabled", true)
            var urlC = $(".form2").attr("matvendorload-url");
            req = $.ajax({
                   url: urlC,
                   data:{
                     },
                     success: function (data) {
                       $("#id_matvendor").html(data);
                     }
                });
        }, 0);

setTimeout(function(){
            //if ($('#id_modelnum').length) $("#id_modelnum").attr("disabled", true)
            //if ($('#modelnum_id').val() >1) $("#modelnum_id").attr("disabled", true)
            var urlC = $(".form2").attr("mattypeload-url");
            req = $.ajax({
                   url: urlC,
                   data:{
                     },
                     success: function (data) {
                       $("#id_materialtype").html(data);
                     }
                });
        }, 0);


});





function addDescription() {
var userInput = document.getElementById("id_descrip").value;
                    console.log(userInput);
                    var url = $(".form2").attr("adddescrip-url");
                     $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_descrip: $("#id_descrip").val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
}

function addCost() {
var userInput = document.getElementById("id_cost").value;
                    console.log(userInput);
                    var url = $(".form2").attr("addcost-url");
                     $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_cost: $("#id_cost").val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
}
////////////////// Material Manufacturer //////////////////////////////////////
$(function(){
   $('#id_matmfg').change(function(){
    if ($('#id_matmfg').val() ==1) $(".mfg-modal").show()
        setTimeout(function(){
                var selectBox =document.getElementById('id_matmfg');
                var userInput =selectBox.options[selectBox.selectedIndex].value;
                console.log(userInput);
                var url = $(".form2").attr("matmfg-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_matmfg: $('#id_matmfg').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 100);
    });
});


 $(function(){
    $('.accept').click(function(){
        $(".mfg2").hide()
        setTimeout(function(){
            var userInput = document.getElementById("id_matmfg2").value;
                console.log(userInput);
                var url = $(".form2").attr("matmfg2-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_matmfg2: $('#id_matmfg2').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 100);
    });
});

$(function(){
    $('.accept').click(function(){
        setTimeout(function(){
            var urlC = $(".form2").attr("matmfgload-url");
            req = $.ajax({
                   url: urlC,
                   data:{
                     },
                     success: function (data) {
                       $("#id_matmfg").html(data);
                     }
                });
        },400);
    });
});

$(function(){
    $('.button1').click(function(){
        $(".mfg2").show()
        $(".mfg-modal").hide()
    });
});

$(function(){
    $('.button2').click(function(){
        $(".mfg-modal").hide()
    });
});

$(function(){
    $('button.cancel').click(function(){
        $(".mfg2").hide()
    });
});


////////////////// Vendor //////////////////////////////////////

$(function(){
   $('#id_vendor').change(function(){
    if ($('#id_vendor').val() ==1) $(".vendor-modal").show()
        setTimeout(function(){
                var selectBox =document.getElementById('id_vendor');
                var userInput =selectBox.options[selectBox.selectedIndex].value;
                console.log(userInput);
                var url = $(".form2").attr("matvendor-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_vendor: $('#id_vendor').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 100);
    });
});

 $(function(){
    $('.acceptvendor').click(function(){
        $(".vendor2").hide()
        setTimeout(function(){
            var userInput = document.getElementById("id_vendor2").value;
                console.log(userInput);
                var url = $(".form2").attr("matvendor2-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_vendor2: $('#id_vendor2').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 100);
    });
});

$(function(){
    $('.acceptvendor').click(function(){
        setTimeout(function(){
            var urlC = $(".form2").attr("matvendorload-url");
            req = $.ajax({
                   url: urlC,
                   data:{
                     },
                     success: function (data) {
                       $("#id_vendor").html(data);
                     }
                });
        },400);
    });
});


$(function(){
    $('.button1vendor').click(function(){
        $(".vendor2").show()
        $(".vendor-modal").hide()
    });
});

$(function(){
    $('.button2vendor').click(function(){
        $(".vendor-modal").hide()
    });
});

$(function(){
    $('button.cancelvendor').click(function(){
        $(".vendor2").hide()
    });
});

////////////////// Material Type //////////////////////////////////////

$(function(){
   $('#id_materialtype').change(function(){
    if ($('#id_materialtype').val() ==1) $(".type-modal").show()
        setTimeout(function(){
                var selectBox =document.getElementById('id_materialtype');
                var userInput =selectBox.options[selectBox.selectedIndex].value;
                console.log(userInput);
                var url = $(".form2").attr("mattype-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_materialtype: $('#id_materialtype').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 100);
    });
});

 $(function(){
    $('.accepttype').click(function(){
        $(".type2").hide()
        setTimeout(function(){
            var userInput = document.getElementById("id_materialtype2").value;
                console.log(userInput);
                var url = $(".form2").attr("mattype2-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_materialtype2: $('#id_materialtype2').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 100);
    });
});

$(function(){
    $('.accepttype').click(function(){
        setTimeout(function(){
            var urlC = $(".form2").attr("mattypeload-url");
            req = $.ajax({
                   url: urlC,
                   data:{
                     },
                     success: function (data) {
                       $("#id_materialtype").html(data);
                     }
                });
        },400);
    });
});


$(function(){
    $('.button1type').click(function(){
        $(".type2").show()
        $(".type-modal").hide()
    });
});

$(function(){
    $('.button2type').click(function(){
        $(".type-modal").hide()
    });
});

$(function(){
    $('button.canceltype').click(function(){
        $(".type2").hide()
    });
});


</script>