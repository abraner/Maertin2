<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="shortcut icon" type="image/png" href="../../../img/img.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../static/login/package1.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Maertin Heating & Cooling Bidding Program</title>
</head>
<body style="background: #008B8B;" >
<div class="container">
    <div class="container2">
        <div class="header1">
            <div id="A1">Package #1</div>
        </div>
        <div class="container2a">


         <div class="header3">
             <div id="D">ID</div>
             <div id="A">Description</div>
             <div id="B">Unit Price</div>
             <div id="C">Quanity</div>
      </div>
      <form class="form2" method="post">
          {% for obj in object_list %}
          <div class="rowmat">
              <a id="id" >{{ obj.id }}</a>
              <div id="descrip">{{ obj.description }}</div>
              <div id="cost">{{ obj.unitprice }}</div>
              <div id="quant">{{ obj.quant }}</div>
              <a id="deletemat" href="{{ obj.get_absolute1a_url }}">Delete</a>
          </div>
          {% endfor %}

      </form>
    </div>

        <div id="butrow">
            <a href="{% url 'mhadatabase:package1add' %}">
                <button type="button" class="button1">Add Material to Package</button>
            </a>
        </div>
    </div>
</div>
</body>
</html>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>

<script>



$(function(){
   $('#id_description').change(function(){
        setTimeout(function(){
                var selectBox =document.getElementById('id_description');
                var userInput =selectBox.options[selectBox.selectedIndex].value;
                console.log(userInput);
                var url = $(".form2").attr("package1a-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_description: $('#id_description').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 0);
    });
});

$(function(){
   $('#id_quant').change(function(){
        setTimeout(function(){
                var selectBox =document.getElementById('id_quant');
                var userInput =selectBox.options[selectBox.selectedIndex].value;
                console.log(userInput);
                var url = $(".form2").attr("package1b-url");
                    $.ajax({
                        type:'POST',
                       url: url,
                       data:{
                            id_quant: $('#id_quant').val(),
                            csrfmiddlewaretoken: '{{ csrf_token }}'
                         },
                    });
        }, 300);
    });
});




</script>